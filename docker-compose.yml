services:
  cafe_bot:
    build:
      context: .
    restart: unless-stopped
    environment:
      - TELEGRAM_BOT_TOKEN=${TELEGRAM_BOT_TOKEN}
      - BACKEND_URL=${BACKEND_URL:-http://cafe_backend:8080}
      - CAFE_API_KEY=${CAFE_API_KEY}
      - AUDIT_GROUP_ID=${AUDIT_GROUP_ID}
      - PROXY_URL=${PROXY_URL:-http://cafe_mihomo:7890}
      - PYTHONUNBUFFERED=1
    depends_on:
      cafe_mihomo:
        condition: service_healthy
    networks:
      - cafe-net

networks:
  cafe-net:
